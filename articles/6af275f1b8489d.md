---
title: "ã€Flutterã€‘Admobã®ãƒãƒŠãƒ¼ã‚’è¤‡æ•°ç®‡æ‰€ã«å‡ºãã†ã¨ã—ãŸéš›ã«ç™ºç”Ÿã—ãŸã‚¨ãƒ©ãƒ¼ã®è§£æ±ºç­–"
emoji: "ğŸš¨"
type: "tech"
topics:
  - "flutter"
  - "admob"
published: true
published_at: "2022-11-16 08:11"
---

# ç¾è±¡
ListViewå†…ã«ä¸€å®šé–“éš”ã”ã¨ã«ãƒãƒŠãƒ¼åºƒå‘Šã‚’1ã¤ãšã¤è¨­ç½®ã—ã‚ˆã†ã¨ã—ãŸéš›ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
```
This AdWidget is already in the Widget tree
```
![](https://storage.googleapis.com/zenn-user-upload/dc9cf2f35172-20221116.png)


### ç’°å¢ƒ
- Flutterãƒãƒ¼ã‚¸ãƒ§ãƒ³: 3.3.8
- google_mobile_ads: 2.2.0

# åŸå› 
ã‚¨ãƒ©ãƒ¼ã®é€šã‚Šã§ã¯ã‚ã‚Šã¾ã™ãŒã€åŒä¸€ã®AdWidgetãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹äº‹ãŒåŸå› ã§ã—ãŸã€‚
AdWidgetã®å¼•æ•°ã«`BannerAd`ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ¸¡ã™ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ãŒã€ã“ã®å¼•æ•°ã«æŒ‡å®šã—ãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒåŒä¸€ã®å ´åˆã«ã€åŒä¸€ã®AdWidgetã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚

- ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
```dart
  @override
  Widget build(BuildContext context, WidgetRef ref) {
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€final myBanner = ref.watch(admobBannerProvider)ï¼›
	
	...çœç•¥
	
          SizedBox(
            height: 50.0,
            child: AdWidget(ad: myBanner),ã€€ã€€// myBannerã®éƒ¨åˆ†ãŒåŒä¸€ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãŸã‚ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ãŸ
          ),
	
	...
ã€€ã€€ã€€ã€€}
```
- providerå®šç¾©
```dart
final admobBannerProvider = Provider<BannerAd>((ref) {
  return BannerAd(
    adUnitId: <åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆID>,
    size: AdSize.banner,
    request: const AdRequest(),
    listener: const BannerAdListener()
  )..load();
});
```

ä½™è«‡ã§ã™ãŒã€`google_mobile_ads`ã®æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯åŒä¸€ã®AdWidgetã‚’è¤‡æ•°ç®‡æ‰€ã§ä½¿ç”¨ã§ããŸã¿ãŸã„ã§ã™ã€‚ãŸã ã€è‡ªåˆ†ãŒä½¿ç”¨ã—ãŸv2.2.0ã§ã¯ãã®ã‚ˆã†ãªä»•æ§˜å¤‰æ›´ãŒå…¥ã£ãŸã‚ˆã†ã§ã—ãŸã€‚

# è§£æ±ºç­–
ãƒãƒŠãƒ¼è¨­ç½®ç®‡æ‰€(AdWidget)ã”ã¨ã«æ–°ã—ã„`BannerAd`ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦ã‚ã’ã‚‹ã€‚

1. `BannerAd`ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã‚„ã™ã„ã‚ˆã†ã«æ±ç”¨ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã€‚
```dart
class AdmobManager {
  BannerAd get bannerAd {
    return BannerAd(
      adUnitId: <åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆID>, // ç’°å¢ƒã”ã¨ã«å–å¾—ã™ã‚‹
      size: AdSize.banner,
      request: const AdRequest(),
      listener: const BannerAdListener(),
    )..load();
  }
}
```

2. Viewå´ã§AdWidgetä½¿ç”¨ç®‡æ‰€ã”ã¨ã«éƒ½åº¦ã€åˆ¥ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¦æ¸¡ã™ã€‚
```dart
  @override
  Widget build(BuildContext context, WidgetRef ref) {
	
	...çœç•¥
	
          SizedBox(
            height: 50.0,
            child: AdWidget(ad: AdmobManager().bannerAd),ã€€ã€€// AdmobManager().bannerAdï¼šæ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆ
          ),
	
	...
ã€€ã€€ã€€ã€€}
```

ç„¡äº‹ã€åºƒå‘Šã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚
![](https://storage.googleapis.com/zenn-user-upload/60d509b6bb03-20221116.png)

# æœ€å¾Œã«
2022/12/22è¿½è¨˜
:::message
ãã‚‚ãã‚‚ï¼‘ã¤ã®AdWidgetã«å¯¾ã—ã¦ï¼‘ã¤ã®åºƒå‘ŠIDã¨ãªã‚‹ã‚ˆã†å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ã„ã†è©±ã‚’èãã¾ã—ãŸã®ã§ã€ä¸Šè¨˜ã®å¯¾å¿œç­–ã¯NGãªæ–¹æ³•ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ï¼ˆè‡ªåˆ†ã§ãã®è¨˜è¿°ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒå‡ºæ¥ãªã‹ã£ãŸã®ã§ä¸ç¢ºã‹ã§ã™ï¼‰
â€»AdMobã¯è¦ç´„ãªã©ãŒå³æ ¼ã«ã‚ã‚‹ã®ã§ã”æ³¨æ„ãã ã•ã„ã€‚
:::